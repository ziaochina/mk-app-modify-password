webpackJsonp([1],{1643:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,u,s=r(2),o=a(s),c=r(58),i=a(c),f=r(4),d=a(f),p=r(10),l=a(p),h=r(7),v=a(h),m=r(8),w=a(m),k=r(0),x=(a(k),r(286)),b=r(633),P=a(b),g=(n=(0,x.wrapper)(P.default))(u=function(e){function t(){return(0,d.default)(this,t),(0,v.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,w.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return this.props.monkeyKing((0,o.default)({},this.props,{path:"root"}))}}]),t}(k.Component))||u;t.default=g,e.exports=t.default},1644:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=new k.action(e),r=new y((0,c.default)({},e,{metaAction:t})),a=(0,c.default)({},t,r);return t.config({metaHandlers:a}),a}Object.defineProperty(t,"__esModule",{value:!0});var u=r(90),s=a(u),o=r(2),c=a(o),i=r(137),f=a(i),d=r(627),p=a(d),l=r(628),h=a(l),v=r(4),m=a(v);t.default=n;var w=r(0),k=(a(w),r(286)),x=(r(187),r(9)),b=(a(x),r(630)),P=a(b),g=r(59),_=a(g),y=function e(t){var r=this;(0,m.default)(this,e),this.onInit=function(e){var t=e.component,a=e.injections;r.component=t,r.injections=a,r.component.props.setOkListener&&r.component.props.setOkListener(r.onOk),a.reduce("init")},this.onOk=(0,h.default)(p.default.mark(function e(){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.save();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,r)})),this.save=(0,h.default)(p.default.mark(function e(){var t,a,n,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.metaAction.gf("data.form").toJS(),e.next=3,r.check([{path:"data.form.oldPassword",value:t.oldPassword},{path:"data.form.password",value:t.password},{path:"data.form.confirmPassword",value:t.confirmPassword}]);case 3:if(a=e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return n=r.metaAction.context.get("currentUser"),u=n&&n.id,r.config.apps["mk-app-login"]||(u=1),e.next=11,r.webapi.user.modifyPassword({id:u,oldPassword:t.oldPassword,password:t.password});case 11:return r.metaAction.toast("success","修改密码成功"),e.abrupt("return",!0);case 13:case"end":return e.stop()}},e,r)})),this.getSecurityLevelText=function(e){if(!e)return"";var t=_.default.password.analyzeSecurityLevel(e);return 1==t?"强度：低":2==t?"强度：中低":3==t?"强度：中":4==t?"强度：中高":"强度：高"},this.fieldChange=function(){var e=(0,h.default)(p.default.mark(function e(t,a){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.check([{path:t,value:a}]);case 2:case"end":return e.stop()}},e,r)}));return function(t,r){return e.apply(this,arguments)}}(),this.check=function(){var e=(0,h.default)(p.default.mark(function e(t){var a,n,u,o,i,d,l,h,v,m,w;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:a=[],n=!0,u=!1,o=void 0,e.prev=6,i=(0,f.default)(t);case 8:if(n=(d=i.next()).done){e.next=47;break}if(l=d.value,h=(0,c.default)({},l),"data.form.oldPassword"!=l.path){e.next=20;break}return e.t0=s.default,e.t1=h,e.next=16,r.checkOldPassword(l.value);case 16:e.t2=e.sent,(0,e.t0)(e.t1,e.t2),e.next=43;break;case 20:if("data.form.password"!=l.path){e.next=36;break}return e.t3=s.default,e.t4=h,e.next=25,r.checkPassword(l.value);case 25:if(e.t5=e.sent,(0,e.t3)(e.t4,e.t5),!(v=r.metaAction.gf("data.form.confirmPassword"))){e.next=34;break}return e.t6=a,e.next=32,r.checkConfirmPassword(v,l.value);case 32:e.t7=e.sent,e.t6.push.call(e.t6,e.t7);case 34:e.next=43;break;case 36:if("data.form.confirmPassword"!=l.path){e.next=43;break}return e.t8=s.default,e.t9=h,e.next=41,r.checkConfirmPassword(l.value,r.metaAction.gf("data.form.password"));case 41:e.t10=e.sent,(0,e.t8)(e.t9,e.t10);case 43:a.push(h);case 44:n=!0,e.next=8;break;case 47:e.next=53;break;case 49:e.prev=49,e.t11=e.catch(6),u=!0,o=e.t11;case 53:e.prev=53,e.prev=54,!n&&i.return&&i.return();case 56:if(e.prev=56,!u){e.next=59;break}throw o;case 59:return e.finish(56);case 60:return e.finish(53);case 61:return m={},w=!0,a.forEach(function(e){m[e.path]=e.value,m[e.errorPath]=e.message,e.message&&(w=!1)}),r.metaAction.sfs(m),e.abrupt("return",w);case 66:case"end":return e.stop()}},e,r,[[6,49,53,61],[54,,56,60]])}));return function(t){return e.apply(this,arguments)}}(),this.checkOldPassword=function(){var e=(0,h.default)(p.default.mark(function e(t){var a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t||(a="请录入旧的密码"),e.abrupt("return",{errorPath:"data.other.error.oldPassword",message:a});case 2:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}(),this.checkPassword=function(){var e=(0,h.default)(p.default.mark(function e(t){var a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t||(a="请录入新的密码"),e.abrupt("return",{errorPath:"data.other.error.password",message:a});case 2:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}(),this.checkConfirmPassword=function(){var e=(0,h.default)(p.default.mark(function e(t,a){var n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t?a!=t&&(n="两次密码输入不一致，请确认"):n="请录入确认密码",e.abrupt("return",{errorPath:"data.other.error.confirmPassword",message:n});case 2:case"end":return e.stop()}},e,r)}));return function(t,r){return e.apply(this,arguments)}}(),this.metaAction=t.metaAction,this.config=P.default.current,this.webapi=this.config.webapi};e.exports=t.default},1645:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=new p.reducer(e),r=new m((0,i.default)({},e,{metaReducer:t}));return(0,i.default)({},t,r)}Object.defineProperty(t,"__esModule",{value:!0});var u,s,o,c=r(2),i=a(c),f=r(4),d=a(f);t.default=n;var p=(r(187),r(286)),l=r(630),h=(a(l),r(9)),v=(a(h),r(634)),m=(s=u=function e(t){(0,d.default)(this,e),o.call(this),this.metaReducer=t.metaReducer},o=function(){var e=this;this.init=function(t,r){return e.metaReducer.init(t,(0,v.getInitState)(r))}},s);e.exports=t.default}});